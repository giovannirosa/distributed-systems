---
layout: default
title: Trabalho Prático 3
---

<body>
    <a href="../">Voltar</a>
    <h1>Trabalho Prático 3</h1>
    <p><b>Especificação:</b> Implemente o algoritmo de Best-Effort Broadcast sobre o VCube. O programa deve receber como
        entradas: o processo fonte do broadcast, o número de nodos do sistema e uma lista de nodos para falhar durante a
        execução. Deve ser possível tanto definir processos que estarão falhos durante toda a execução, como processos
        que falham em momentos específicos.</p>
    <p>Além disso, deve ser possível fazer uma execução com escalonamento de falhas definidas aleatoriamente. Em outras
        palavras: quando vc executa o algoritmo usando esta abordagem, processos escolhidos aleatoriamente vão falhar
        entre o início e o fim do broadcast.</p>
    <p>No relatório, explique cuidadosamente como vc implementou cada função e o algoritmo como um todo. Mostre os logs
        com cuidado, de forma que seja possível ver com clareza o progresso do broadcast, inclusive após a ocorrência de
        falhas. Um caso que deve estar nos logs é o seguinte: um processo aguarda o ACK de outro processo. Em seguida
        (antes de receber o ACK) o processo que deveria mandar o ACK falha. Agora o processo que aguardava o ACK deve
        mandar uma nova mensagem para outro processo do cluster do processo que falhou. Deve ser fácil visualizar toda
        esta situação no seu log!</p>

    <h2>Código</h2>
    <p>Fontes: <a href="./src/bebcast.c">bebcast.c</a> <a href="./src/bebcast.h">bebcast.h</a></p>
    </p>
    <p>O código foi escrito a partir do código do <a href="../trab2/vcube2/src/vcube2.c">vcube2.c</a> da <a
            href="../trab2/vcube2/">Versão 2</a> do <a href="../trab2/">Trabalho Prático 2</a>. As seguintes alterações
        foram
        realizadas para cumprir os requisitos do Trabalho Prático 2:</p>
    <ol>
        <li>Funções auxiliares para a simulação que estão descritas no <a href="./src/bebcast.h">bebcast.h</a></li>
    </ol>
    <h2>Execução</h2>
    <p>O programa deve ser executado seguindo o modelo esperado:</p>
{% highlight plaintext %}
./bebcast <fonte do broadcast> <numero de processos> <lista de falhas opcional (#,#:#)>
{% endhighlight %}
            <p>Qualquer entrada que não siga esse modelo produz saídas inesperadas. Algumas validações foram feitas, mas
                todos
                os casos possíveis não estão cobertos.</p>
            <ul>
                <li>
                    <p>A fonte do broadcast deve estar dentro do conjunto de processos.</p>
                </li>
                <li>
                    <p>A lista de falhas é opcional, e caso seja omitida o programa executará no modo aleatório.</p>
                </li>
                <li>
                    <p>A lista de falhas deve ser &lt;processo&gt;:&lt;0=inicio falho ou 1=falho no decorrer&gt; separados por vírgula.
                        Caso o 0 ou 1 for omitido, o processo será definido como falho ao decorrer da simulação. Caso o processo for omitido
                        da lista de falhas, ele será correto em toda a simulação.</p>
                    <p>Ex.: ./bebcast 0 4 0:1,3:0,2:0</p>
                    <p>Nesse caso o fonte será o 0 com 4 processos no total. O processo 0 inicia como falho, o 1 se mantém correto
                        sempre, e o 3 e 2 falham no decorrer da simulação, nessa ordem.</p>
                </li>
                <li>
                    <p>A lista de falhas representa uma ordem desejada para as falhas ocorrerem e não tem um momento garantido para
                        respeitar a restrição de que uma falha só pode ocorrer quando a anterior é diagnosticada.</p>
                </li>
                <li>
                    <p>As falhas definidas para ocorrer ao longo da simulação (valor 1) serão agendadas para ocorrer na ordem da entrada.</p>
                </li>
                <li>
                    <p>As falhas ocorrem a partir do tempo 30 e as seguintes são agendadas assim que a anterior é diagnosticada.</p>
                </li>
                <li>
                    <p>O modo aleatório gera a ordem de falhas desejada e ocorrem da mesma forma que as falhas entradas pelo usuário.</p>
                </li>
            </ul>
            <p>Os testes a seguir foram executados para demonstrar a corretude do programa. Cada teste está separado em
                uma página e contém um fluxograma das mensagens feito exclusivamente pela observação do log, que também
                pode ser visualizado.</p>
            <h3>Testes de Validação</h3>
            Estes testes foram realizados para verificar as validações do programa para evitar entradas incorretas do
            usuário:
            <ol>
                <li>./bebcast</li>
{% highlight plaintext %}
Uso correto: bebcast <fonte do broadcast> <numero de processos> <lista de falhas opcional (#,#:#)>
{% endhighlight %}
                <li>./bebcast 4 4</li>
{% highlight plaintext %}
O processo fonte 4 (F) deve estar dentro do numero de processos 4 (N)! [F < N]
{% endhighlight %}
                <li>./bebcast 0 4 a:1,2:1</li>
{% highlight plaintext %}
A lista de falhas apresenta uma entrada que nao e numero!
{% endhighlight %}
            </ol>
            <h3 id="teste1">Teste 1</h3>
            <p>Mostre todas as mensagens transmitidas broadcasts iniciados pelo processo 0 (zero) em sistemas com N = 8,
                16 e 32 processos, todos corretos (3 cenários sem falhas).</p>
            <a href="./test/test1/">Ir para a página do teste 1</a>
            <h3 id="teste2">Teste 2</h3>
            <p>Em um sistema com 8 processos, o broadcast é iniciado pelo processo 0 e estão falhos 2, 4 e 5.</p>
            <a href="./test/test2/">Ir para a página do teste 2</a>
            <h3 id="teste3">Teste 3</h3>
            <p>Em um sistema com 8 processos, o broadcast é iniciado pelo processo 7 e estão falhos 3 e 1.</p>
            <a href="./test/test3/">Ir para a página do teste 3</a>
            <h3 id="teste4">Teste 4</h3>
            <p>Em um sistema com 16 processos, o broadcast é iniciado pelo processo 0 e estão falhos 2, 8, 9 e 12.</p>
            <a href="./test/test4/">Ir para a página do teste 4</a>
            <h3 id="teste5">Teste 5</h3>
            <p>Em um sistema com 32 processos, o broadcast é iniciado pelo processo 16 e estão falhos 0, 2, 4 e 8.</p>
            <a href="./test/test5/">Ir para a página do teste 5</a>
            <h3 id="teste6">Teste 6</h3>
            <p>Em um sistema com 8 processos, o broadcast é iniciado pelo processo 0 e os processos 2 e 6 falham após receber a mensagem.</p>
            <a href="./test/test6/">Ir para a página do teste 6</a>
</body>